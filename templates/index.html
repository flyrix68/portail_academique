<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portail Acad√©mique - Gestion des √âtudiants</title>
    <link rel="stylesheet" href="static/style.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Portail Acad√©mique - Gestion des √âtudiants</h1>
            <div class="clock-widget">
                <div class="clock-icon">üïê</div>
                <div class="clock-time" id="current-time">--:--:--</div>
                <div class="clock-date" id="current-date">----</div>
                <button onclick="updateClock()" class="clock-test-btn" title="Actualiser l'horloge">üîÑ</button>
            </div>
        </div>

        <!-- Tab Navigation -->
        <div class="tab-navigation">
            <button class="tab-button active" onclick="openTab(this, 'dashboard')">Tableau de Bord</button>
            <button class="tab-button" onclick="openTab(this, 'books')">Biblioth√®que</button>
            <button class="tab-button" onclick="openTab(this, 'admin')">Administration</button>
            <button class="tab-button" onclick="openTab(this, 'graduation')">√âligibilit√© Dipl√¥me</button>
            <button class="tab-button" onclick="openTab(this, 'enrollment')">V√©rification d'Inscription</button>
            <button class="tab-button" onclick="openTab(this, 'details')">D√©tails √âtudiant</button>
            <button class="tab-button" onclick="openTab(this, 'grades')">Notes</button>
            <button class="tab-button" onclick="openTab(this, 'search')">Recherche</button>
            <button class="tab-button" onclick="openTab(this, 'stats')">Statistiques</button>
            <button class="tab-button" onclick="openTab(this, 'connections')">Test Connexions</button>
        </div>

        <!-- Tab Content -->
        <div id="dashboard" class="tab-content active">
            <h2>Tableau de Bord √âtudiant</h2>
            <div class="sgbd-indicator">
                <span class="sgbd-badge oracle">Oracle</span>
                <span class="sgbd-badge mysql">MySQL</span>
                <span class="sgbd-badge postgresql">PostgreSQL</span>
            </div>
            <p><em>R√©cup√®re le profil complet d'un √©tudiant depuis les trois bases de donn√©es</em></p>
            <div class="form-group">
                <input type="text" id="dashboard-student-id" placeholder="ID √âtudiant">
                <button onclick="getStudentDashboard()">Voir le Tableau de Bord</button>
            </div>
            <div id="dashboard-result"></div>
        </div>

        <div id="admin" class="tab-content">
            <h2>Administration - Alimentation des Bases de Donn√©es</h2>

            <!-- Sub-tabs for admin -->
            <div class="sub-tab-navigation">
                <button class="sub-tab-button active" onclick="openSubTab(this, 'populate')">Alimentation Rapide</button>
                <button class="sub-tab-button" onclick="openSubTab(this, 'students')">√âtudiants</button>
                <button class="sub-tab-button" onclick="openSubTab(this, 'grades')">Notes</button>
                <button class="sub-tab-button" onclick="openSubTab(this, 'admin-books')">Livres</button>
                <button class="sub-tab-button" onclick="openSubTab(this, 'loans')">Emprunts</button>
                <button class="sub-tab-button" onclick="openSubTab(this, 'all-books')">üìö Catalogue Complet</button>
                <button class="sub-tab-button" onclick="openSubTab(this, 'all-loans')">üìñ Tous les Emprunts</button>
            </div>

            <!-- Sub-tab content -->
            <div id="populate" class="sub-tab-content active">
                <div class="admin-section">
                    <h3>üöÄ Alimentation Rapide (Donn√©es de Test)</h3>
                    <p><em>Cliquez pour ins√©rer automatiquement des donn√©es de test dans toutes les bases</em></p>
                    <div class="sample-data-info">
                        <div class="data-preview">
                            <h4>üü† Oracle - √âtudiants</h4>
                            <ul>
                                <li>Jean Dupont (jean.dupont@esatic.ci)</li>
                                <li>Marie Martin (marie.martin@esatic.ci)</li>
                                <li>Pierre Dubois (pierre.dubois@esatic.ci)</li>
                            </ul>
                        </div>
                        <div class="data-preview">
                            <h4>üü¢ MySQL - Notes</h4>
                            <ul>
                                <li>Analyse de Donn√©es: 15.5/20</li>
                                <li>Middleware: 14.0/20</li>
                                <li>Processus de Markov: 16.5/20</li>
                            </ul>
                        </div>
                        <div class="data-preview">
                            <h4>üîµ PostgreSQL - Livres</h4>
                            <ul>
                                <li>Introduction √† l'Informatique</li>
                                <li>Math√©matiques Discr√®tes</li>
                                <li>Bases de Donn√©es</li>
                            </ul>
                        </div>
                    </div>
                    <button onclick="populateSampleData()" class="admin-btn primary">Alimenter avec Donn√©es d'Exemple</button>
                    <div id="populate-result"></div>
                </div>
            </div>

            <div id="students" class="sub-tab-content">
                <div class="admin-card full-width">
                    <h3>üë§ Ajouter un √âtudiant</h3>
                    <div class="sgbd-indicator">
                        <span class="sgbd-badge oracle">Oracle</span>
                    </div>
                    <form onsubmit="insertStudent(event)">
                        <div class="form-group">
                            <input type="number" id="student-id" placeholder="ID √âtudiant" required>
                            <input type="text" id="student-nom" placeholder="Nom" required>
                        </div>
                        <div class="form-group">
                            <input type="text" id="student-prenom" placeholder="Pr√©nom" required>
                            <input type="email" id="student-email" placeholder="Email" required>
                        </div>
                        <div class="form-group">
                            <input type="tel" id="student-tel" placeholder="T√©l√©phone">
                            <input type="text" id="student-adresse" placeholder="Adresse">
                        </div>
                        <button type="submit" class="admin-btn">Ajouter √âtudiant</button>
                    </form>
                    <div id="student-insert-result"></div>
                </div>
            </div>

            <div id="grades" class="sub-tab-content">
                <div class="admin-card full-width">
                    <h3>üìä Ajouter une Note</h3>
                    <div class="sgbd-indicator">
                        <span class="sgbd-badge mysql">MySQL</span>
                    </div>
                    <form onsubmit="insertGrade(event)">
                        <div class="form-group">
                            <input type="number" id="grade-student-id" placeholder="ID √âtudiant" required>
                            <input type="number" id="grade-matiere-id" placeholder="ID Mati√®re" required>
                        </div>
                        <div class="form-group">
                            <input type="number" id="grade-note" placeholder="Note (/20)" step="0.5" min="0" max="20" required>
                            <input type="date" id="grade-date" required>
                        </div>
                        <button type="submit" class="admin-btn">Ajouter Note</button>
                    </form>
                    <div id="grade-insert-result"></div>
                </div>
            </div>

            <div id="admin-books" class="sub-tab-content">
                <div class="admin-card full-width">
                    <h3>üìö Ajouter un Livre</h3>
                    <div class="sgbd-indicator">
                        <span class="sgbd-badge postgresql">PostgreSQL</span>
                    </div>
                    <form onsubmit="insertBook(event)">
                        <div class="form-group">
                            <input type="number" id="book-id" placeholder="ID Livre" required>
                            <input type="text" id="book-titre" placeholder="Titre" required>
                        </div>
                        <div class="form-group">
                            <input type="text" id="book-auteur" placeholder="Auteur" required>
                            <input type="text" id="book-categorie" placeholder="Cat√©gorie">
                        </div>
                        <button type="submit" class="admin-btn">Ajouter Livre</button>
                    </form>
                    <div id="book-insert-result"></div>
                </div>
            </div>

            <div id="loans" class="sub-tab-content">
                <div class="admin-card full-width">
                    <h3>üîÑ Cr√©er un Emprunt</h3>
                    <div class="sgbd-indicator">
                        <span class="sgbd-badge postgresql">PostgreSQL</span>
                    </div>
                    <form onsubmit="createLoan(event)">
                        <div class="form-group">
                            <input type="number" id="loan-student-id" placeholder="ID √âtudiant" required>
                            <input type="number" id="loan-book-id" placeholder="ID Livre" required>
                        </div>
                        <button type="submit" class="admin-btn">Cr√©er Emprunt</button>
                    </form>
                    <div id="loan-create-result"></div>
                </div>
            </div>

            <div id="all-books" class="sub-tab-content">
                <div class="admin-card full-width">
                    <h3>üìö Catalogue Complet des Livres</h3>
                    <div class="sgbd-indicator">
                        <span class="sgbd-badge postgresql">PostgreSQL</span>
                    </div>
                    <p><em>Vue d'ensemble de tous les livres enregistr√©s avec leur statut</em></p>
                    <button onclick="loadAllBooksAdmin()" class="admin-btn primary">Actualiser le Catalogue</button>
                    <div id="all-books-admin-list"></div>
                </div>
            </div>

            <div id="all-loans" class="sub-tab-content">
                <div class="admin-card full-width">
                    <h3>üìñ Historique Complet des Emprunts</h3>
                    <div class="sgbd-indicator">
                        <span class="sgbd-badge postgresql">PostgreSQL</span>
                    </div>
                    <p><em>Historique d√©taill√© de tous les emprunts (actuels et pass√©s)</em></p>
                    <button onclick="loadAllLoansAdmin()" class="admin-btn primary">Actualiser l'Historique</button>
                    <div id="all-loans-admin-list"></div>
                </div>
            </div>
        </div>


        <div id="books" class="tab-content">
            <h2>Gestion de Biblioth√®que</h2>

            <!-- Sub-tabs for books -->
            <div class="sub-tab-navigation">
                <button class="sub-tab-button active" onclick="openSubTab(this, 'available-books')">Livres Disponibles</button>
                <button class="sub-tab-button" onclick="openSubTab(this, 'my-loans')">Mes Emprunts</button>
                <button class="sub-tab-button" onclick="openSubTab(this, 'borrow-book')">Emprunter</button>
            </div>

            <!-- Sub-tab content -->
            <div id="available-books" class="sub-tab-content active">
                <div class="library-section">
                    <h3>üìö Livres Disponibles</h3>
                    <div class="form-group">
                        <input type="text" id="student-id-books" placeholder="Votre ID √âtudiant">
                        <button onclick="loadAvailableBooks()">Voir les Livres</button>
                    </div>
                    <div id="available-books-list"></div>
                </div>
            </div>

            <div id="my-loans" class="sub-tab-content">
                <div class="library-section">
                    <h3>üìñ Mes Emprunts</h3>
                    <div class="form-group">
                        <input type="text" id="my-loans-student-id" placeholder="Votre ID √âtudiant">
                        <button onclick="loadMyLoans()">Voir Mes Emprunts</button>
                    </div>
                    <div id="my-loans-list"></div>
                </div>
            </div>

            <div id="borrow-book" class="sub-tab-content">
                <div class="library-section">
                    <h3>üîÑ Emprunter un Livre</h3>
                    <div class="form-group">
                        <input type="text" id="borrow-student-id" placeholder="Votre ID √âtudiant">
                        <input type="text" id="borrow-book-id" placeholder="ID du Livre">
                        <button onclick="borrowBookDirect()">Emprunter</button>
                    </div>
                    <div id="borrow-result"></div>
                </div>
            </div>
        </div>

        <div id="graduation" class="tab-content">
            <h2>√âligibilit√© √† l'Obtention du Dipl√¥me</h2>
            <div class="sgbd-indicator">
                <span class="sgbd-badge oracle">Oracle</span>
                <span class="sgbd-badge mysql">MySQL</span>
                <span class="sgbd-badge postgresql">PostgreSQL</span>
            </div>
            <p><em>V√©rifie tous les crit√®res d'√©ligibilit√© depuis les trois syst√®mes</em></p>
            <div class="form-group">
                <input type="text" id="graduation-student-id" placeholder="ID √âtudiant">
                <button onclick="checkGraduationEligibility()">V√©rifier √âligibilit√©</button>
            </div>
            <div id="graduation-result"></div>
        </div>

        <div id="enrollment" class="tab-content">
            <h2>V√©rifier l'Inscription d'un √âtudiant</h2>
            <div class="sgbd-indicator">
                <span class="sgbd-badge oracle">Oracle</span>
            </div>

            <div class="approach-comparison">
                <div class="approach-card">
                    <h3>üîµ Avec ODBC</h3>
                    <div class="form-group">
                        <input type="text" id="student-id-enrollment-odbc" placeholder="ID √âtudiant">
                        <button onclick="checkEnrollmentODBC()">V√©rifier (ODBC)</button>
                    </div>
                    <div id="enrollment-odbc-result"></div>
                </div>

                <div class="approach-card">
                    <h3>üî¥ Sans Middleware</h3>
                    <div class="form-group">
                        <input type="text" id="student-id-enrollment-direct" placeholder="ID √âtudiant">
                        <button onclick="checkEnrollmentDirect()">V√©rifier (Direct)</button>
                    </div>
                    <div id="enrollment-direct-result"></div>
                </div>
            </div>

            <div id="enrollment-comparison-result"></div>
        </div>

        <div id="details" class="tab-content">
            <h2>D√©tails Complets d'un √âtudiant</h2>
            <div class="sgbd-indicator">
                <span class="sgbd-badge oracle">Oracle</span>
            </div>
            <div class="form-group">
                <input type="text" id="student-id-details" placeholder="ID √âtudiant">
                <button onclick="getStudentDetails()">Consulter</button>
            </div>
            <div id="details-result"></div>
        </div>

        <div id="grades" class="tab-content">
            <h2>Notes d'un √âtudiant</h2>
            <div class="sgbd-indicator">
                <span class="sgbd-badge mysql">MySQL</span>
            </div>
            <div class="form-group">
                <input type="text" id="student-id-grades" placeholder="ID √âtudiant">
                <button onclick="getStudentGrades()">Voir les Notes</button>
            </div>
            <div id="grades-result"></div>
        </div>

        <div id="search" class="tab-content">
            <h2>Rechercher un √âtudiant par Nom</h2>
            <div class="sgbd-indicator">
                <span class="sgbd-badge oracle">Oracle</span>
            </div>
            <div class="form-group">
                <input type="text" id="student-name-search" placeholder="Nom de l'√©tudiant">
                <button onclick="searchStudents()">Rechercher</button>
            </div>
            <div id="search-result"></div>
        </div>

        <div id="stats" class="tab-content">
            <h2>Statistiques d'Inscription</h2>
            <div class="sgbd-indicator">
                <span class="sgbd-badge oracle">Oracle</span>
                <span class="sgbd-badge mysql">MySQL</span>
                <span class="sgbd-badge postgresql">PostgreSQL</span>
            </div>
            <p><em>S√©lectionnez le syst√®me de base de donn√©es √† consulter</em></p>
            <div class="db-buttons">
                <button onclick="getEnrollmentStats('oracle')">Oracle</button>
                <button onclick="getEnrollmentStats('mysql')">MySQL</button>
                <button onclick="getEnrollmentStats('postgresql')">PostgreSQL</button>
            </div>
            <div id="stats-result"></div>
        </div>

        <div id="connections" class="tab-content">
            <h2>Test des Connexions aux Bases de Donn√©es</h2>
            <div class="sgbd-indicator">
                <span class="sgbd-badge oracle">Oracle</span>
                <span class="sgbd-badge mysql">MySQL</span>
                <span class="sgbd-badge postgresql">PostgreSQL</span>
            </div>
            <div class="db-buttons">
                <button onclick="testConnection('oracle')">Tester Oracle</button>
                <button onclick="testConnection('mysql')">Tester MySQL</button>
                <button onclick="testConnection('postgresql')">Tester PostgreSQL</button>
            </div>
            <div id="connection-result"></div>
        </div>
    </div>

    <script src="static/script.js"></script>
</body>
</html>